version: "3.8"

services: 
  mosquitto_broker:
    restart: unless-stopped
    image: eclipse-mosquitto:2.0
    volumes:
      - ./mosquitto/config/:/mosquitto/config/
      #- ./mosquitto/data:/mosquitto/data/
      - ./mosquitto/log:/mosquitto/log/
    ports:
      - "1883:1883"
      - "9001:9001"
    networks: 
      - default 
    expose:
      - "1883"

  command_app:
      restart: "no"
      build: . 
      volumes:
        - .:/app 
      #ports:
       # - "1884:1883" 
      networks:
        - default
      stdin_open: true
      tty : true
      command: python -u main.py

#networks:
  #backend:
    #name: custom_network